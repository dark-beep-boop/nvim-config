{
  "C OOP class declarations boilerplate": {
    "prefix": "<CClassDeclaration",
    "description": "C OOP class declarations boilerplate",
    "body": [
      "${2:int} $1_initialize($1 *obj$3);",
      "void $1_finalize($1 *obj);",
      "",
      "$1 *$1_new($3);",
      "void $1_delete($1 *obj);"
    ]
  },
  "C OOP class header boilerplate": {
    "prefix": "<CClassHeader",
    "description": "C OOP class header boilerplate",
    "body": [
      "#ifndef $1_H",
      "#define $1_H",
      "",
      "${3:int} $2_initialize($2 *obj$4);",
      "void $2_finalize($2 *obj);",
      "",
      "$2 *$2_new($4);",
      "void $2_delete($2 *obj);",
      "",
      "#endif /*$1_H*/"
    ]
  },
  "C OOP class definitions boilerplate": {
    "prefix": "<CClassDefinition",
    "description": "C OOP class definitions boilerplate",
    "body": [
      "int",
      "$1_initialize($1 *obj$2)",
      "{",
      "  int status = EXIT_SUCCESS;",
      "",
      "  assert(obj != NULL && \"No memory allocated for the object\");",
      "",
      "  ZEROIZE(obj);",
      "",
      "  $3",
      "",
      "  return EXIT_SUCCESS;",
      "",
      "error:",
      "  $1_finalize(obj);",
      "",
      "  return status;",
      "}",
      "",
      "void",
      "$1_finalize($1 *obj)",
      "{",
      "  assert(obj != NULL && \"No memory allocated for the object\");",
      "",
      "  $4",
      "",
      "  ZEROIZE(obj);",
      "}",
      "",
      "$1 *",
      "$1_new($2)",
      "{",
      "  $1 *obj = NULL;",
      "",
      "  /* On error, obj will be NULL */",
      "  TRY_ALLOCATE(obj);",
      "",
      "  /* On error, obj will be finalized but not NULL */",
      "  TRY_ERROR($1_initialize(obj$5));",
      "",
      "  return obj;",
      "",
      "error:",
      "",
      "  /* If obj is not NULL, it's still allocated */",
      "  if (obj) {",
      "    $1_delete(obj);",
      "    obj = NULL;",
      "  }",
      "",
      "  return NULL;",
      "}",
      "",
      "void",
      "$1_delete($1 *obj)",
      "{",
      "  assert(obj != NULL && \"No memory allocated for the object\");",
      "",
      "  $1_finalize(obj);",
      "  free(obj);",
      "}"
    ]
  },
  "C OOP class implementation boilerplate": {
    "prefix": "<CClassImplementation",
    "description": "C OOP class implementation boilerplate",
    "body": [
      "#include \"try.h\"",
      "#include \"util.h\"",
      "#include \"$1.h\"",
      "",
      "int",
      "$1_initialize($1 *obj$2)",
      "{",
      "  int status = EXIT_SUCCESS;",
      "",
      "  assert(obj != NULL && \"No memory allocated for the object\");",
      "",
      "  ZEROIZE(obj);",
      "",
      "  $3",
      "",
      "  return EXIT_SUCCESS;",
      "",
      "error:",
      "  $1_finalize(obj);",
      "",
      "  return status;",
      "}",
      "",
      "void",
      "$1_finalize($1 *obj)",
      "{",
      "  assert(obj != NULL && \"No memory allocated for the object\");",
      "",
      "  $4",
      "",
      "  ZEROIZE(obj);",
      "}",
      "",
      "$1 *",
      "$1_new($2)",
      "{",
      "  $1 *obj = NULL;",
      "",
      "  /* On error, obj will be NULL */",
      "  TRY_ALLOCATE(obj);",
      "",
      "  /* On error, obj will be finalized but not NULL */",
      "  TRY_ERROR($1_initialize(obj$5));",
      "",
      "  return obj;",
      "",
      "error:",
      "",
      "  /* If obj is not NULL, it's still allocated */",
      "  if (obj) {",
      "    $1_delete(obj);",
      "    obj = NULL;",
      "  }",
      "",
      "  return NULL;",
      "}",
      "",
      "void",
      "$1_delete($1 *obj)",
      "{",
      "  assert(obj != NULL && \"No memory allocated for the object\");",
      "",
      "  $1_finalize(obj);",
      "  free(obj);",
      "}"
    ]
  }
}
